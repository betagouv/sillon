"use strict";(self.webpackChunksillon=self.webpackChunksillon||[]).push([[6925],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=o,f=d["".concat(s,".").concat(m)]||d[m]||c[m]||i;return n?r.createElement(f,a(a({ref:t},p),{},{components:n})):r.createElement(f,a({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:o,a[1]=l;for(var u=2;u<i;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8374:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var r=n(7462),o=(n(7294),n(3905));const i={hide_table_of_contents:!0},a="\u2026 et rapprocher le frontend du frontend",l={unversionedId:"frontend-backend-close/unique-frontend",id:"frontend-backend-close/unique-frontend",title:"\u2026 et rapprocher le frontend du frontend",description:"Certains produits num\xe9riques peuvent n\xe9cessiter \"plusieurs frontend\". L'exemple le plus simple est de souhaiter avoir un applicatif et une landing page (site vitrine). Il peut donc \xeatre tentant d'en faire 2 applicatifs distincts, dans les m\xeames technologies (pour \xe9viter de se disperser), et id\xe9alement de les mettre dans le monorepository mentionn\xe9 plus haut.",source:"@site/docs/frontend-backend-close/unique-frontend.mdx",sourceDirName:"frontend-backend-close",slug:"/frontend-backend-close/unique-frontend",permalink:"/docs/frontend-backend-close/unique-frontend",draft:!1,editUrl:"https://github.com/betagouv/sillon/tree/main/docs/frontend-backend-close/unique-frontend.mdx",tags:[],version:"current",frontMatter:{hide_table_of_contents:!0},sidebar:"docs",previous:{title:"Avoir le code dans un m\xeame repository",permalink:"/docs/frontend-backend-close/monorepository"},next:{title:"Un langage typ\xe9",permalink:"/docs/typed-language"}},s={},u=[{value:"Par le routage",id:"par-le-routage",level:2},{value:"Par le d\xe9ploiement",id:"par-le-d\xe9ploiement",level:2}],p={toc:u},d="wrapper";function c(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"-et-rapprocher-le-frontend-du-frontend"},"\u2026 et rapprocher le frontend du frontend"),(0,o.kt)("p",null,'Certains produits num\xe9riques peuvent n\xe9cessiter "plusieurs frontend". L\'exemple le plus simple est de souhaiter avoir un applicatif et une ',(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Landing_page"},"landing page")," (site vitrine). Il peut donc \xeatre tentant d'en faire 2 applicatifs distincts, dans les m\xeames technologies (pour \xe9viter de se disperser), et id\xe9alement de les mettre dans le monorepository mentionn\xe9 plus haut."),(0,o.kt)("p",null,"Mais vous devrez alors g\xe9rer plusieurs fois la quasi m\xeame configuration : m\xeame d\xe9pendances, m\xeame gestion d'URL, m\xeame configuration du framework, m\xeame gestion de tests, m\xeame client pour la base de donn\xe9es\u2026"),(0,o.kt)("p",null,"Il peut \xeatre int\xe9ressant de les g\xe9rer depuis le m\xeame applicatif, en jouant simplement sur le pr\xe9fix du routage des URLs :"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"/landing/*")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"/app/*"))),(0,o.kt)("p",null,"\u2026 Comme cela un seul runtime suffit pour 2 frontends (voire m\xeame plus)."),(0,o.kt)("p",null,"Bien entendu vous pourriez avoir des besoins sp\xe9cifiques pour les URLs (SEO, esth\xe9tique\u2026) pour par exemple avoir comme URLs :"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"https://www.example.com/")," (landing)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"https://app.example.com/")," (app)")),(0,o.kt)("p",null,"Plusieurs solutions sont envisageables\u2026"),(0,o.kt)("h2",{id:"par-le-routage"},"Par le routage"),(0,o.kt)("p",null,"Vous gardez 1 seule instance pour g\xe9rer tous les frontends, par contre il faut que votre h\xe9bergeur et/ou votre framework vous autorisent \xe0 g\xe9rer plusieurs domaines pour le trafic entrant afin de faire la bonne correspondance (tel domaine va utiliser tel pr\xe9fixe dans le pathname\u2026 ",(0,o.kt)("em",{parentName:"p"},"Cela peut s'apparenter \xe0 de l'",(0,o.kt)("a",{parentName:"em",href:"https://en.wikipedia.org/wiki/Rewrite_engine"},"URL rewriting")),")."),(0,o.kt)("h2",{id:"par-le-d\xe9ploiement"},"Par le d\xe9ploiement"),(0,o.kt)("p",null,"Si la solution par routage n'est pas envisageable, vous pouvez vous tourner vers votre pipeline de d\xe9ploiement. Au lieu d'avoir une seule \xe9tape de ",(0,o.kt)("em",{parentName:"p"},"build")," apr\xe8s tous vos tests\u2026 vous en avez 2 o\xf9 pour chacune vous pouvez choisir le routage voulu (",(0,o.kt)("inlineCode",{parentName:"p"},"A")," ou ",(0,o.kt)("inlineCode",{parentName:"p"},"B")," plut\xf4t que ",(0,o.kt)("inlineCode",{parentName:"p"},"A+B"),"). Et vous d\xe9ployez chacun des builds \xe0 2 endroits diff\xe9rents. \xc9vitant ainsi une configuration de routage sur les domaines racines."))}c.isMDXComponent=!0}}]);