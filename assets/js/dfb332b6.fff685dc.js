"use strict";(self.webpackChunksillon=self.webpackChunksillon||[]).push([[9378],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>v});var s=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=s.createContext({}),l=function(e){var t=s.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return s.createElement(u.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},m=s.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,u=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),p=l(n),m=r,v=p["".concat(u,".").concat(m)]||p[m]||d[m]||i;return n?s.createElement(v,o(o({ref:t},c),{},{components:n})):s.createElement(v,o({ref:t},c))}));function v(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var a={};for(var u in t)hasOwnProperty.call(t,u)&&(a[u]=t[u]);a.originalType=e,a[p]="string"==typeof e?e:r,o[1]=a;for(var l=2;l<i;l++)o[l]=n[l];return s.createElement.apply(null,o)}return s.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7641:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var s=n(7462),r=(n(7294),n(3905));const i={hide_table_of_contents:!0},o="2FA / Security keys",a={unversionedId:"security/two-factor-authentication",id:"security/two-factor-authentication",title:"2FA / Security keys",description:"Le probl\xe8me d'une authentification avec un simple mot de passe, c'est que si quelqu'un vous voit l'\xe9crire dans le train, ou vous le vole en \xe9tant \xe0 l'autre bout du monde avec un virus, c'est alors \"open bar\", vous n'avez aucun moyen de limiter la casse.",source:"@site/docs/security/two-factor-authentication.mdx",sourceDirName:"security",slug:"/security/two-factor-authentication",permalink:"/docs/security/two-factor-authentication",draft:!1,editUrl:"https://github.com/betagouv/sillon/tree/main/docs/security/two-factor-authentication.mdx",tags:[],version:"current",frontMatter:{hide_table_of_contents:!0},sidebar:"docs",previous:{title:"Gestionnaire de mots de passe",permalink:"/docs/security/password-manager"},next:{title:"Acc\xe8s restreints et alertes",permalink:"/docs/security/manage-access-and-monitor"}},u={},l=[],c={toc:l},p="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,s.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"2fa--security-keys"},"2FA / Security keys"),(0,r.kt)("p",null,"Le probl\xe8me d'une authentification avec un simple mot de passe, c'est que si quelqu'un vous voit l'\xe9crire dans le train, ou vous le vole en \xe9tant \xe0 l'autre bout du monde avec un virus, c'est alors \"open bar\", vous n'avez aucun moyen de limiter la casse."),(0,r.kt)("p",null,"C'est l\xe0 o\xf9 ",(0,r.kt)("strong",{parentName:"p"},"le deuxi\xe8me facteur d'authentification (2FA) est primordial"),", c'est normalement une s\xe9curit\xe9 additionnelle proche de vous physiquement pour valider des op\xe9rations (de connexion dans notre contexte)."),(0,r.kt)("p",null,"Ainsi, si :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"On vous pirate \xe0 distance votre mot de passe, il manque au pirate le 2FA ;"),(0,r.kt)("li",{parentName:"ul"},"On vous vole votre 2FA, il manque au pirate le mot de passe.")),(0,r.kt)("p",null,"Si jamais la personne arrive \xe0 avoir votre mot de passe et votre 2FA\u2026 Soit vous avez utilis\xe9 un 2FA basique, soit vous \xeates victime d'un coup organis\xe9."),(0,r.kt)("p",null,"Il existe plusieurs types de 2FA :"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Validation par SMS (la moins s\xe9curis\xe9e en cas de vol de t\xe9l\xe9phone puisque souvent aucun besoin de le d\xe9verrouiller pour lire les SMS) ;"),(0,r.kt)("li",{parentName:"ol"},'Validation par l\'application mobile du produit (les banques appellent souvent dans ce cas votre t\xe9l\xe9phone un "terminal de confiance") ;'),(0,r.kt)("li",{parentName:"ol"},"Validation par ",(0,r.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Time-based_one-time_password"},"TOTP")," (suite de chiffres valide 30 secondes) (souvent g\xe9r\xe9 par une application nomm\xe9e ",(0,r.kt)("inlineCode",{parentName:"li"},"??? Authenticator"),") ;"),(0,r.kt)("li",{parentName:"ol"},"Validation par une cl\xe9 de s\xe9curit\xe9 (",(0,r.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/WebAuthn"},"WebAuthn")," \xe9tant le dernier standard).")),(0,r.kt)("p",null,"On va surtout s'int\xe9resser aux (3) et (4) qui sont les standards les plus utilis\xe9s pour l'authentification. Tout est bas\xe9 sur une cl\xe9 priv\xe9e unique stock\xe9e dans l'application ",(0,r.kt)("inlineCode",{parentName:"p"},"TOTP Authenticator"),", ou dans votre cl\xe9 de s\xe9curit\xe9. Ce qui permet de chiffrer une s\xe9quence d'autorisation durant une authentification."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Si vous utilisez un gestionnaire de mots de passe, le 2FA est primordial \ud83d\udd11.")),(0,r.kt)("p",null,"Utiliser la (3) pour prot\xe9ger vos comptes ",(0,r.kt)("strong",{parentName:"p"},"(en plus du gestionnaire)")," est d\xe9j\xe0 tr\xe8s bien, mais assurez-vous juste :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'Que votre TOTP Authenticator soit sauvegard\xe9 automatiquement sur des serveurs et que vous ayez r\xe9cup\xe9r\xe9 les "cl\xe9s de backup". Histoire que si vous perdez votre t\xe9l\xe9phone vous puissiez r\xe9installer l\'application et retrouver tous les codes (sinon vous serez bloqu\xe9s sur tous vos comptes, et il est tr\xe8s rare que les supports r\xe9pondent pour d\xe9bloquer ce genre de situation) ;'),(0,r.kt)("li",{parentName:"ul"},"Que votre t\xe9l\xe9phone (si l'Authenticator est dessus) ainsi que l'Authenticator aient un code de verrouillage pour \xeatre d\xe9bloqu\xe9 (ou par empreinte digitale).")),(0,r.kt)("p",null,"Sinon pour le (4), ",(0,r.kt)("strong",{parentName:"p"},"nous recommandons \xe0 ce que vous ayez quelqu'un autour de vous qui puisse vous montrer un peu comment \xe7a marche au quotidien. C'est un processus plus \xe9toff\xe9 que la (3) et qui demande un minimum de rigueur, il vaut donc mieux \xeatre bien sensibilis\xe9.")," Une cl\xe9 de s\xe9curit\xe9 ressemble \xe0 une cl\xe9 USB, sauf que son contenu ne peut pas \xeatre lu (celui qui tente de la d\xe9monter grille obligatoirement le circuit et la cl\xe9 priv\xe9e de chiffrement reste\u2026 priv\xe9e puisque d\xe9truite). Il est tr\xe8s risqu\xe9 d'en avoir qu'une car si vous la perdez (qui n'a jamais perdu de cl\xe9 ?), vous perdez d'office votre seul moyen de 2FA."),(0,r.kt)("p",null,"Il est recommand\xe9 d'utiliser 3 cl\xe9s de s\xe9curit\xe9 minimum (elles ont donc chacune une cl\xe9 priv\xe9e diff\xe9rente en leur sein) que vous configurerez sur chacun de vos comptes les plus sensibles (gestionnaire de mots de passe et bo\xeetes emails). Vous vous doutez bien, il ne faut pas garder vos 3 cl\xe9s ensemble, donc dans l'id\xe9al :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Une sur vous en permanence quand des v\xe9rifications 2FA vous sont demand\xe9es (de pr\xe9f\xe9rence une cl\xe9 qui fait USB+NFC afin de pouvoir \xeatre utilis\xe9 sur t\xe9l\xe9phone) ;"),(0,r.kt)("li",{parentName:"ul"},"Une cach\xe9e chez vous (sous le plancher\u2026 comme il vous sied tant que vous puissiez la retrouver) ;"),(0,r.kt)("li",{parentName:"ul"},"Une cach\xe9e chez le fils de la cousine de la tante de votre p\xe8re \ud83d\ude0e.")),(0,r.kt)("p",null,"Si jamais vous perdez l'une des clefs, vous vous connectez avec l'une des cl\xe9s de secours sur tous vos comptes ayant \xe9t\xe9 configur\xe9 avec les cl\xe9s de s\xe9curit\xe9, puis vous supprimez l'ancienne et pour ajouter une nouvelle que vous venez d'acheter en remplacement."),(0,r.kt)("p",null,"Vous l'avez peut-\xeatre d\xe9cel\xe9 mais si vous souhaitiez utiliser la m\xe9thode \"security key\" sur chacun de vos comptes il faudrait \xe0 chaque inscription avoir acc\xe8s \xe0 toutes vos cl\xe9s (compliqu\xe9 quand vous les avez cach\xe9es \xe0 50 kilom\xe8tres de chez vous). C'est pour cela que nous proposions de surtout configurer le gestionnaire et vos bo\xeetes emails, car ces comptes ne bougeront quasi pas dans le temps."),(0,r.kt)("p",null,"La technique ensuite pour les autres services \"plus basiques\" est d'utiliser le 2FA TOTP (m\xe9thode (3)). C'est votre gestionnaire de mots de passe qui va servir d'Authenticator pour g\xe9n\xe9rer les codes qui durent 30 secondes (normalement les gestionnaires ont cette fonctionnalit\xe9)."),(0,r.kt)("admonition",{title:"Pas toujours le choix",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Vous verrez que de toute fa\xe7on vous n'aurez des fois pas le choix que d'adopter le (3) en 2FA. Hormis les services sp\xe9cialis\xe9s dans la s\xe9curit\xe9, l'option 2FA en cl\xe9 de s\xe9curit\xe9 est assez rare compar\xe9 au TOTP.")),(0,r.kt)("p",null,"Si on r\xe9sume dans le cas d'un red\xe9marrage de mon ordinateur :"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Je souhaite me connecter sur un site ",(0,r.kt)("inlineCode",{parentName:"li"},"ABC")," qui est prot\xe9g\xe9 avec un 2FA TOTP ;"),(0,r.kt)("li",{parentName:"ol"},"Je lance mon gestionnaire, entre mon master password, et utilise ma cl\xe9 de s\xe9curit\xe9 pour passer le 2FA du gestionnaire ;"),(0,r.kt)("li",{parentName:"ol"},"Je copie/colle le mot de passe du site ",(0,r.kt)("inlineCode",{parentName:"li"},"ABC")," ;"),(0,r.kt)("li",{parentName:"ol"},"Le site me demande le 2FA TOTP que je vais chercher dans mon gestionnaire (pour simplifier, souvent le gestionnaire va automatiquement le mettre dans le ",(0,r.kt)("a",{parentName:"li",href:"https://fr.wikipedia.org/wiki/Presse-papiers_(informatique)"},"presse-papier")," pour que vous n'ayez plus qu'\xe0 le coller apr\xe8s un auto-remplissage des identifiants).")),(0,r.kt)("admonition",{title:"Quoi acheter ?",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"La marque la plus connue est ",(0,r.kt)("a",{parentName:"p",href:"https://www.yubico.com/"},"Yubico")," (su\xe9dois) avec ses Yubikeys, mais il existe plein d'alternatives (que nous n'avons pas test\xe9s).")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Activer le 2FA est b\xe9n\xe9fique tout autant dans le cadre priv\xe9 que dans le cadre professionnel. Nous recommandons que votre \xe9quipe utilise le 2FA dans tous vos outils.")," Et quand c'est possible, de forcer dans l'outil le 2FA \xe0 tous les membres."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Notez qu'il est difficile de r\xe9sumer tous les cas d'utilisation de ces m\xe9thodes par \xe9crit, nous essayons ici de poser des bases afin de vous aider \xe0 vous lancer.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Vous pouvez aller plus loin en suivant le tutorial ",(0,r.kt)("a",{parentName:"strong",href:"/docs/go-further/setup-security-key"},"Connection SSH et signature de commit avec une cl\xe9 de s\xe9curit\xe9"))))}d.isMDXComponent=!0}}]);