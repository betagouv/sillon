"use strict";(self.webpackChunksillon=self.webpackChunksillon||[]).push([[9299],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(n),d=i,f=c["".concat(l,".").concat(d)]||c[d]||m[d]||o;return n?r.createElement(f,a(a({ref:t},p),{},{components:n})):r.createElement(f,a({ref:t},p))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:i,a[1]=s;for(var u=2;u<o;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},852:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(9960),i=n(7294);function o(e){let{src:t,alt:n,caption:o,source:a,style:s}=e;return i.createElement("figure",null,i.createElement("img",{src:t,alt:n,style:s}),(!!o||!!a)&&i.createElement("figcaption",{style:{textAlign:"center",fontSize:"0.9em"}},o,!!o&&!!a&&" ",!!a&&i.createElement(i.Fragment,null,"(",i.createElement(r.Z,{href:a,style:{fontStyle:"italic"}},"source"),")")))}},1202:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>f,frontMatter:()=>s,metadata:()=>u,toc:()=>c});var r=n(7462),i=(n(7294),n(3905));const o=n.p+"assets/images/solutions-comparison-eddf7c3ef328ec6cdc2e4df5cbdba66b.png";var a=n(852);const s={hide_table_of_contents:!0},l="Authentifier les utilisateurs",u={unversionedId:"user-authentication/index",id:"user-authentication/index",title:"Authentifier les utilisateurs",description:"Vous pouvez adopter plusieurs strat\xe9gies en fonction de votre produit (ce choix d\xe9coule de l'investigation, ce n'est pas un choix technique) :",source:"@site/docs/user-authentication/index.mdx",sourceDirName:"user-authentication",slug:"/user-authentication/",permalink:"/docs/user-authentication/",draft:!1,editUrl:"https://github.com/betagouv/sillon/tree/main/docs/user-authentication/index.mdx",tags:[],version:"current",frontMatter:{hide_table_of_contents:!0},sidebar:"docs",previous:{title:"Se d\xe9charger des outils non sensibles",permalink:"/docs/simple-and-sovereign-cloud-provider/offload-non-sensitive-tools"},next:{title:"L'int\xe9gration et le d\xe9ploiement continu (CI/CD)",permalink:"/docs/continuous-integration-and-continuous-deployment/"}},p={},c=[],m={toc:c},d="wrapper";function f(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"authentifier-les-utilisateurs"},"Authentifier les utilisateurs"),(0,i.kt)("p",null,"Vous pouvez adopter plusieurs strat\xe9gies en fonction de votre produit (ce choix d\xe9coule de l'investigation, ce n'est pas un choix technique) :"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Avoir votre propre syst\xe8me d'enregistrement et connexion ;"),(0,i.kt)("li",{parentName:"ol"},"Utiliser un syst\xe8me de connexion connu comme FranceConnect ;"),(0,i.kt)("li",{parentName:"ol"},"Utiliser les 2.")),(0,i.kt)("p",null,"Nous pr\xe9conisons d'utiliser ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nextauthjs/next-auth"},(0,i.kt)("inlineCode",{parentName:"a"},"next-auth"))," au sein de Next.js pour r\xe9pondre \xe0 n'importe lequel de ces cas de figure."),(0,i.kt)("p",null,"La (1) vous permet :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"D'aller vite ;"),(0,i.kt)("li",{parentName:"ul"},"D'avoir un comportement similaire en local, d\xe9veloppement et production ;"),(0,i.kt)("li",{parentName:"ul"},"De ne pas reposer sur un syst\xe8me tiers qui peut \xeatre indisponible.")),(0,i.kt)("p",null,"La (2) :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Faciliter la connexion \xe0 vos utilisateurs ;"),(0,i.kt)("li",{parentName:"ul"},"Reposer sur un standard s\xe9curis\xe9 comme ",(0,i.kt)("a",{parentName:"li",href:"https://fr.wikipedia.org/wiki/OpenID_Connect"},"OpenID Connect")," (OIDC), ou ",(0,i.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/SAML_2.0"},"SAML")," pour des syst\xe8mes plus historiques.")),(0,i.kt)("p",null,"Pour la (1) si vous ne voulez pas alourdir le d\xe9veloppement et votre exp\xe9rience utilisateur, utilisez la plus basique des connexions directement depuis votre applicatif (cela marche depuis des ann\xe9es et \xe7a n'en est pas \"moins s\xe9curis\xe9\"). Assurez-vous juste d'avoir dans votre base de donn\xe9es des mots de passes ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Hash_function"},"hash\xe9s")," avec l'algorithme ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/kelektiv/node.bcrypt.js/"},(0,i.kt)("inlineCode",{parentName:"a"},"bcrypt"))," (10 it\xe9rations minimum). ",(0,i.kt)("em",{parentName:"p"},"Les raisons de d\xe9ployer vous-m\xeame un outil lourd compatible OIDC comme ",(0,i.kt)("a",{parentName:"em",href:"https://www.keycloak.org/"},"Keycloak")," ou ",(0,i.kt)("a",{parentName:"em",href:"https://www.ory.sh/hydra/"},"Hydra")," peut \xeatre appropri\xe9 si vous g\xe9rez une multitude de frontends distincts et que vous voulez avoir un seul compte commun pour les gouverner tous\u2026")),(0,i.kt)("p",null,"Pour la (2) c'est directement des initiatives du service public, pour d\xe9tailler les principaux :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://franceconnect.gouv.fr/"},"FranceConnect")," ;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://agentconnect.gouv.fr/"},"AgentConnect")," ;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://esante.gouv.fr/"},"ProSant\xe9Connect")," ;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://moncomptepro.beta.gouv.fr/"},"MonComptePro")," ;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://aidantsconnect.beta.gouv.fr/"},"Aidants Connect")," (pas list\xe9 dans la comparatif, mais \xe0 titre informatif).")),(0,i.kt)(a.b,{src:o,alt:"",caption:"Comparatif fait par MonComptePro",source:"https://moncomptepro.beta.gouv.fr/partenaire",mdxType:"CaptionedImage"}))}f.isMDXComponent=!0}}]);