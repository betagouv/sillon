---
hide_table_of_contents: true
---

# 2FA / Security keys

Le probl√®me d'une authentification avec un simple mot de passe, c'est que si quelqu'un vous voit l'√©crire dans le train, ou vous le vole en √©tant √† l'autre bout du monde avec un virus, c'est alors "open bar", vous n'avez aucun moyen de limiter la casse.

C'est l√† o√π **le deuxi√®me facteur d'authentification (2FA) est primordial**, c'est normalement une s√©curit√© additionnelle proche de vous physiquement pour valider des op√©rations (de connexion dans notre contexte).

Ainsi, si :

- On vous pirate √† distance votre mot de passe, il manque au pirate le 2FA ;
- On vous vole votre 2FA, il manque au pirate le mot de passe.

Si jamais la personne arrive √† avoir votre mot de passe et votre 2FA‚Ä¶ Soit vous avez utilis√© un 2FA basique, soit vous √™tes victime d'un coup organis√©.

Il existe plusieurs types de 2FA :

1.  Validation par SMS (la moins s√©curis√©e en cas de vol de t√©l√©phone puisque souvent aucun besoin de le d√©verrouiller pour lire les SMS) ;
2.  Validation par l'application mobile du produit (les banques appellent souvent dans ce cas votre t√©l√©phone un "terminal de confiance") ;
3.  Validation par [TOTP](https://en.wikipedia.org/wiki/Time-based_one-time_password) (suite de chiffres valide 30 secondes) (souvent g√©r√© par une application nomm√©e `??? Authenticator`) ;
4.  Validation par une cl√© de s√©curit√© ([WebAuthn](https://en.wikipedia.org/wiki/WebAuthn) √©tant le dernier standard).

On va surtout s'int√©resser aux (3) et (4) qui sont les standards les plus utilis√©s pour l'authentification. Tout est bas√© sur une cl√© priv√©e unique stock√©e dans l'application `TOTP Authenticator`, ou dans votre cl√© de s√©curit√©. Ce qui permet de chiffrer une s√©quence d'autorisation durant une authentification.

**Si vous utilisez un gestionnaire de mots de passe, le 2FA est primordial üîë.**

Utiliser la (3) pour prot√©ger vos comptes **(en plus du gestionnaire)** est d√©j√† tr√®s bien, mais assurez-vous juste :

- Que votre TOTP Authenticator soit sauvegard√© automatiquement sur des serveurs et que vous ayez r√©cup√©r√© les "cl√©s de backup". Histoire que si vous perdez votre t√©l√©phone vous puissiez r√©installer l'application et retrouver tous les codes (sinon vous serez bloqu√©s sur tous vos comptes, et il est tr√®s rare que les supports r√©pondent pour d√©bloquer ce genre de situation) ;
- Que votre t√©l√©phone (si l'Authenticator est dessus) ainsi que l'Authenticator aient un code de verrouillage pour √™tre d√©bloqu√© (ou par empreinte digitale).

Sinon pour le (4), **nous recommandons √† ce que vous ayez quelqu'un autour de vous qui puisse vous montrer un peu comment √ßa marche au quotidien. C'est un processus plus √©toff√© que la (3) et qui demande un minimum de rigueur, il vaut donc mieux √™tre bien sensibilis√©.** Une cl√© de s√©curit√© ressemble √† une cl√© USB, sauf que son contenu ne peut pas √™tre lu (celui qui tente de la d√©monter grille obligatoirement le circuit et la cl√© priv√©e de chiffrement reste‚Ä¶ priv√©e puisque d√©truite). Il est tr√®s risqu√© d'en avoir qu'une car si vous la perdez (qui n'a jamais perdu de cl√© ?), vous perdez d'office votre seul moyen de 2FA.

Il est recommand√© d'utiliser 3 cl√©s de s√©curit√© minimum (elles ont donc chacune une cl√© priv√©e diff√©rente en leur sein) que vous configurerez sur chacun de vos comptes les plus sensibles (gestionnaire de mots de passe et bo√Ætes emails). Vous vous doutez bien, il ne faut pas garder vos 3 cl√©s ensemble, donc dans l'id√©al :

- Une sur vous en permanence quand des v√©rifications 2FA vous sont demand√©es (de pr√©f√©rence une cl√© qui fait USB+NFC afin de pouvoir √™tre utilis√© sur t√©l√©phone) ;
- Une cach√©e chez vous (sous le plancher‚Ä¶ comme il vous sied tant que vous puissiez la retrouver) ;
- Une cach√©e chez le fils de la cousine de la tante de votre p√®re üòé.

Si jamais vous perdez l'une des clefs, vous vous connectez avec l'une des cl√©s de secours sur tous vos comptes ayant √©t√© configur√© avec les cl√©s de s√©curit√©, puis vous supprimez l'ancienne et pour ajouter une nouvelle que vous venez d'acheter en remplacement.

Vous l'avez peut-√™tre d√©cel√© mais si vous souhaitiez utiliser la m√©thode "security key" sur chacun de vos comptes il faudrait √† chaque inscription avoir acc√®s √† toutes vos cl√©s (compliqu√© quand vous les avez cach√©es √† 50 kilom√®tres de chez vous). C'est pour cela que nous proposions de surtout configurer le gestionnaire et vos bo√Ætes emails, car ces comptes ne bougeront quasi pas dans le temps.

La technique ensuite pour les autres services "plus basiques" est d'utiliser le 2FA TOTP (m√©thode (3)). C'est votre gestionnaire de mots de passe qui va servir d'Authenticator pour g√©n√©rer les codes qui durent 30 secondes (normalement les gestionnaires ont cette fonctionnalit√©).

:::note Pas toujours le choix
Vous verrez que de toute fa√ßon vous n'aurez des fois pas le choix que d'adopter le (3) en 2FA. Hormis les services sp√©cialis√©s dans la s√©curit√©, l'option 2FA en cl√© de s√©curit√© est assez rare compar√© au TOTP.
:::

Si on r√©sume dans le cas d'un red√©marrage de mon ordinateur :

1.  Je souhaite me connecter sur un site `ABC` qui est prot√©g√© avec un 2FA TOTP ;
2.  Je lance mon gestionnaire, entre mon master password, et utilise ma cl√© de s√©curit√© pour passer le 2FA du gestionnaire ;
3.  Je copie/colle le mot de passe du site `ABC` ;
4.  Le site me demande le 2FA TOTP que je vais chercher dans mon gestionnaire (pour simplifier, souvent le gestionnaire va automatiquement le mettre dans le [presse-papier](<https://fr.wikipedia.org/wiki/Presse-papiers_(informatique)>) pour que vous n'ayez plus qu'√† le coller apr√®s un auto-remplissage des identifiants).

:::note Quoi acheter ?
La marque la plus connue est [Yubico](https://www.yubico.com/) (su√©dois) avec ses Yubikeys, mais il existe plein d'alternatives (que nous n'avons pas test√©s).
:::

**Activer le 2FA est b√©n√©fique tout autant dans le cadre priv√© que dans le cadre professionnel. Nous recommandons que votre √©quipe utilise le 2FA dans tous vos outils.** Et quand c'est possible, de forcer dans l'outil le 2FA √† tous les membres.

_Notez qu'il est difficile de r√©sumer tous les cas d'utilisation de ces m√©thodes par √©crit, nous essayons ici de poser des bases afin de vous aider √† vous lancer._

**Vous pouvez aller plus loin en suivant le tutorial [Connection SSH et signature de commit avec une cl√© de s√©curit√©](../go-further/setup-security-key.mdx)**
